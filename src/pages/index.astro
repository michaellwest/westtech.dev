---
import { getCollection } from "astro:content";
import SiteLayout from "../layouts/SiteLayout.astro";
import PostCard from "../components/PostCard.astro";

const allPosts = await getCollection("posts", ({ data }) => !data.draft);
const posts = allPosts.sort(
  (a, b) => b.data.created.getTime() - a.data.created.getTime()
);
---

<SiteLayout title="westtech.dev">
  <h1 class="sr-only">westtech.dev â€” all posts</h1>
  {
    posts.length === 0 ? (
      <p class="text-zinc-500 dark:text-zinc-400">No posts yet. Check back soon.</p>
    ) : (
      posts.map((post) => (
        <PostCard
          title={post.data.title}
          date={post.data.created}
          description={post.data.description}
          tags={post.data.tags}
          slug={post.id}
        />
      ))
    )
  }
</SiteLayout>
